with System.IO;
with Ada.Real_Time; use Ada.Real_Time;
with System_Time;
with System.Task_Primitives.Operations;
with System.BB.Time;

package body Cyclic_Tasks is

   K : Integer := 0;

   task body Cyclic is
      Task_Static_Offset : constant Time_Span :=
               Ada.Real_Time.Microseconds (0);

      Next_Period : Ada.Real_Time.Time := System_Time.System_Start_Time
            + System_Time.Task_Activation_Delay + Task_Static_Offset;

      Period : constant Ada.Real_Time.Time_Span :=
               Ada.Real_Time.Microseconds (Cycle_Time);

      type Proc_Access is access procedure (X : in out Integer);
      pragma Unreferenced (Proc_Access);
      --  procedure Gauss (Times : Integer);
      --  procedure Gauss (Times : Integer) is
      --   Num : Integer := 0;
      --  begin
      --   for I in 1 .. Times loop
      --      Num := Num + I;
      --   end loop;
      --  end Gauss;
      --  Temp : Integer;

   begin
      System.Task_Primitives.Operations.Set_Relative_Deadline
         (System.Task_Primitives.Operations.Self,
          System.BB.Time.Microseconds (Dead));

      loop
         delay until Next_Period;

         Put_Line("nel ciclo " & Integer'Image (K));
         K:=K+1;
         Next_Period := Next_Period + Period;
      end loop;
   end Cyclic;

   procedure Init is
   begin
      System.Task_Primitives.Operations.Set_Relative_Deadline
        (System.Task_Primitives.Operations.Self,
          System.BB.Time.Milliseconds (Integer'Last));
      loop
         null;
      end loop;
   end Init;
   C1 : Cyclic (118, 36015, 36015, 1, 367);
   C2 : Cyclic (117, 36288, 36288, 2, 371);
   C3 : Cyclic (116, 36741, 36741, 3, 331);
   C4 : Cyclic (116, 36741, 36741, 4, 395);
   C5 : Cyclic (115, 37632, 37632, 5, 161);
   C6 : Cyclic (114, 39690, 39690, 6, 180);
   C7 : Cyclic (113, 40320, 40320, 7, 361);
   C8 : Cyclic (112, 40824, 40824, 8, 277);
   C9 : Cyclic (111, 43218, 43218, 9, 400);
   C10 : Cyclic (110, 45360, 45360, 10, 399);
   C11 : Cyclic (109, 45927, 45927, 11, 371);
   C12 : Cyclic (109, 45927, 45927, 12, 216);
   C13 : Cyclic (108, 50400, 50400, 13, 332);
   C14 : Cyclic (108, 50400, 50400, 14, 377);
   C15 : Cyclic (107, 51030, 51030, 15, 352);
   C16 : Cyclic (107, 51030, 51030, 16, 347);
   C17 : Cyclic (106, 51450, 51450, 17, 221);
   C18 : Cyclic (105, 51861, 51861, 18, 260);
   C19 : Cyclic (104, 52920, 52920, 19, 222);
   C20 : Cyclic (103, 56700, 56700, 20, 249);
   C21 : Cyclic (102, 57153, 57153, 21, 282);
   C22 : Cyclic (102, 57153, 57153, 22, 392);
   C23 : Cyclic (101, 63504, 63504, 23, 321);
   C24 : Cyclic (101, 63504, 63504, 24, 312);
   C25 : Cyclic (100, 64297, 64297, 25, 274);
   C26 : Cyclic (99, 66679, 66679, 26, 218);
   C27 : Cyclic (98, 68040, 68040, 27, 160);
   C28 : Cyclic (97, 73483, 73483, 28, 304);
   C29 : Cyclic (96, 74088, 74088, 29, 275);
   C30 : Cyclic (95, 76204, 76204, 30, 177);
   C31 : Cyclic (94, 85730, 85730, 31, 185);
   C32 : Cyclic (93, 94080, 94080, 32, 253);
   C33 : Cyclic (92, 97977, 97977, 33, 241);
   C34 : Cyclic (91, 110250, 110250, 34, 315);
   C35 : Cyclic (90, 112896, 112896, 35, 262);
   C36 : Cyclic (89, 113400, 113400, 36, 336);
   C37 : Cyclic (88, 128595, 128595, 37, 337);
   C38 : Cyclic (87, 133358, 133358, 38, 160);
   C39 : Cyclic (86, 136080, 136080, 39, 369);
   C40 : Cyclic (86, 136080, 136080, 40, 166);
   C41 : Cyclic (85, 138297, 138297, 41, 263);
   C42 : Cyclic (84, 138915, 138915, 42, 314);
   C43 : Cyclic (84, 138915, 138915, 43, 352);
   C44 : Cyclic (83, 141120, 141120, 44, 231);
   C45 : Cyclic (82, 145152, 145152, 45, 259);
   C46 : Cyclic (82, 145152, 145152, 46, 232);
   C47 : Cyclic (81, 146966, 146966, 47, 288);
   C48 : Cyclic (80, 147000, 147000, 48, 151);
   C49 : Cyclic (79, 150028, 150028, 49, 197);
   C50 : Cyclic (78, 152409, 152409, 50, 211);
   C51 : Cyclic (78, 152409, 152409, 51, 396);
   C52 : Cyclic (77, 510300, 510300, 52, 862);
   C53 : Cyclic (76, 540225, 540225, 53, 830);
   C54 : Cyclic (75, 544320, 544320, 54, 2091);
   C55 : Cyclic (74, 567000, 567000, 55, 1182);
   C56 : Cyclic (73, 571536, 571536, 56, 2149);
   C57 : Cyclic (72, 576240, 576240, 57, 1397);
   C58 : Cyclic (71, 587865, 587865, 58, 1641);
   C59 : Cyclic (70, 588000, 588000, 59, 1379);
   C60 : Cyclic (69, 600112, 600112, 60, 1405);
   C61 : Cyclic (68, 604800, 604800, 61, 1812);
   C62 : Cyclic (67, 617400, 617400, 62, 1646);
   C63 : Cyclic (66, 642978, 642978, 63, 1155);
   C64 : Cyclic (65, 653184, 653184, 64, 1139);
   C65 : Cyclic (64, 691488, 691488, 65, 1116);
   C66 : Cyclic (63, 711244, 711244, 66, 2350);
   C67 : Cyclic (62, 740880, 740880, 67, 2151);
   C68 : Cyclic (62, 740880, 740880, 68, 1236);
   C69 : Cyclic (61, 756000, 756000, 69, 2381);
   C70 : Cyclic (60, 762048, 762048, 70, 2412);
   C71 : Cyclic (60, 762048, 762048, 71, 2347);
   C72 : Cyclic (59, 765450, 765450, 72, 992);
   C73 : Cyclic (58, 777924, 777924, 73, 1232);
   C74 : Cyclic (57, 790272, 790272, 74, 2309);
   C75 : Cyclic (56, 793800, 793800, 75, 872);
   C76 : Cyclic (55, 816480, 816480, 76, 1660);
   C77 : Cyclic (54, 850500, 850500, 77, 2110);
   C78 : Cyclic (53, 900375, 900375, 78, 1024);
   C79 : Cyclic (52, 918540, 918540, 79, 2249);
   C80 : Cyclic (51, 952560, 952560, 80, 1598);
   C81 : Cyclic (50, 972405, 972405, 81, 2137);
   C82 : Cyclic (49, 1050197, 1050197, 82, 2212);
   C83 : Cyclic (48, 1080450, 1080450, 83, 2398);
   C84 : Cyclic (47, 1088640, 1088640, 84, 1563);
   C85 : Cyclic (46, 1152480, 1152480, 85, 2192);
   C86 : Cyclic (46, 1152480, 1152480, 86, 2240);
   C87 : Cyclic (45, 1185408, 1185408, 87, 845);
   C88 : Cyclic (44, 1190700, 1190700, 88, 2324);
   C89 : Cyclic (43, 1200225, 1200225, 89, 1864);
   C90 : Cyclic (42, 1333584, 1333584, 90, 1371);
   C91 : Cyclic (41, 1411200, 1411200, 91, 2159);
   C92 : Cyclic (40, 1488375, 1488375, 92, 943);
   C93 : Cyclic (39, 1543500, 1543500, 93, 1277);
   C94 : Cyclic (38, 4167450, 4167450, 94, 13154);
   C95 : Cyclic (37, 4267468, 4267468, 95, 6444);
   C96 : Cyclic (36, 4465125, 4465125, 96, 5601);
   C97 : Cyclic (35, 4592700, 4592700, 97, 7720);
   C98 : Cyclic (34, 4862025, 4862025, 98, 6025);
   C99 : Cyclic (33, 5080320, 5080320, 99, 14201);
   C100 : Cyclic (32, 5186160, 5186160, 100, 14341);
   C101 : Cyclic (31, 5556600, 5556600, 101, 9856);
   C102 : Cyclic (30, 5953500, 5953500, 102, 5306);
   C103 : Cyclic (30, 5953500, 5953500, 103, 9645);
   C104 : Cyclic (29, 6174000, 6174000, 104, 6464);
   C105 : Cyclic (28, 6401203, 6401203, 105, 9073);
   C106 : Cyclic (27, 6429780, 6429780, 106, 13556);
   C107 : Cyclic (26, 6945750, 6945750, 107, 6583);
   C108 : Cyclic (25, 7112448, 7112448, 108, 9579);
   C109 : Cyclic (24, 7201353, 7201353, 109, 13119);
   C110 : Cyclic (23, 7348320, 7348320, 110, 9277);
   C111 : Cyclic (22, 7620480, 7620480, 111, 6506);
   C112 : Cyclic (22, 7620480, 7620480, 112, 10798);
   C113 : Cyclic (21, 7654500, 7654500, 113, 9971);
   C114 : Cyclic (20, 8164800, 8164800, 114, 10569);
   C115 : Cyclic (19, 8297856, 8297856, 115, 7306);
   C116 : Cyclic (18, 9072000, 9072000, 116, 14054);
   C117 : Cyclic (17, 9144576, 9144576, 117, 11329);
   C118 : Cyclic (16, 9261000, 9261000, 118, 7072);
   C119 : Cyclic (15, 10287648, 10287648, 119, 13447);
   C120 : Cyclic (14, 10418625, 10418625, 120, 11869);
   C121 : Cyclic (14, 10418625, 10418625, 121, 5331);
   C122 : Cyclic (13, 10584000, 10584000, 122, 9541);
   C123 : Cyclic (13, 10584000, 10584000, 123, 9148);
   C124 : Cyclic (12, 10886400, 10886400, 124, 7807);
   C125 : Cyclic (11, 11113200, 11113200, 125, 9705);
   C126 : Cyclic (10, 11481750, 11481750, 126, 5001);
   C127 : Cyclic (9, 11757312, 11757312, 127, 15901);
   C128 : Cyclic (8, 12002256, 12002256, 128, 9494);
   C129 : Cyclic (7, 12247200, 12247200, 129, 6132);
   C130 : Cyclic (7, 12247200, 12247200, 130, 9338);
   C131 : Cyclic (6, 12602368, 12602368, 131, 7031);
   C132 : Cyclic (6, 12602368, 12602368, 132, 8929);
   C133 : Cyclic (6, 12602368, 12602368, 133, 5061);
   C134 : Cyclic (5, 13395375, 13395375, 134, 15481);
   C135 : Cyclic (4, 13608000, 13608000, 135, 8293);
   C136 : Cyclic (3, 13829760, 13829760, 136, 8475);
   C137 : Cyclic (2, 14002632, 14002632, 137, 15039);
   C138 : Cyclic (1, 14696640, 14696640, 138, 14408);
   C139 : Cyclic (1, 14696640, 14696640, 139, 11641);
end Cyclic_Tasks;

